# 안드로드의 화면 구성과 생명 주기, 위젯과 리소스 다루기
`이것이 안드로이드다 with 코틀린, 고돈호 지음` 

책의 04장 기반으로 하여 정리하였습니다.

## 01 배치를 담당하는 레이아웃

### 레이아웃 파일

레이아웃 파일은 소스 코드가 아닌 리소스로 분류된다.

리소스 파일은 모두 소문자로 작성되어야 한다.

ex) `activity_main.xml`

### 컨스트레인트 레이아웃 (ConstraintLayout)

안드로이드 기본(default) 레이아웃

간단한 드래그 앤 드랍만으로 가가의 화면 요소들을 원하는 곳에 배치할 수 있음.

**용어**
- 핸들러
- 앵커 포인트
- 컨스트레이트
  
위젯의 핸들러를 앵커 포인트에 연결하고 생기는 주름무뉘선을 컨스트레이트라 한다.

**컨스트레인트 편집기**

- 크기 조절 핸들러: 상하 또는 좌우 컨스트레인트가 연결되었을 때 사용
  - wrap content: 내용물 크기에 위젯 크기를 맞춤.
  - fixed: layout_width, layout_height 속성에 입력된 크기로 고정됨.
  - match contraint: contraint 시작과 끝에 맞춰 크기 조절됨.
- 바이어스
- 가로세로비 설정

**레이아웃 툴바**

레이아웃에 따라 해당 레이아웃에 맞는 툴바가 UI 편집기 상단에 제공된다.

자석 아이콘 있는 바를 말한다.

**체인으로 연결하기**

컨스트레인트 레이아웃을 처음 접하면 가장 어려운 것이 chaining

12

34

위젯을 위와 같이 두고 순서를 위와 같이 호칭하겠습니다.
1. 위 두 개 선택 후 우클릭 chains > create horizontal chain
2. 아래 두 개 선택 후 우클릭 chains > create horizontal chain
3. 오른쪽 두 개 선택 후 chains > create vertical chain
4. 왼쪽 두 개 선택 후 우클릭 chains > create vertical chain
5. 버튼을 모두 선택하고 layout_width, layout_height 값을 0dp(match constraint)로 변경

**가이드라인**

컨스트레인트 레이아웃에서만 사용할 수 있는 보조 도구로, 가로 세로 두 가지 종류가 있는데 가상의 앵커포인트를 제공하는 역할을 한다.

### 리니어 레이아웃 (LinearLayout)

위젯을 가로 또는 세로 한 줄로 배치하기 위한 레이아웃

**속성**
- orientation
- layout_weight
- gravity
- layout_gravity
  
**스크롤뷰와 함께 사용하기**

첫번째 방법: 기본 레이아웃을 스크롤뷰로 변경

1. [Code] 모드로 변경한 후 .xml 파일에서 ConstraintLayout -> ScrollView로 변경
2. [Design] 모드에서 LinearLayout 1개를 드래그해서 스크롤뷰 안에 가져놓기 (방향 설정 가능)
3. LinearLayout 안에 버튼을 20개 정도 삽입하면 스크롤되는 것을 확인 가능.

두번째 방법: 기본 레이아웃 안에 스크롤뷰를 추가

**space 도구**

리니어 레이아웃에 여러 버튼을 배치하면서 버튼 사이에 일정한 간격을 두고 싶을 때 사용함. 

### 프레임 레이아웃 (FrameLayout)

입력되는 위젯의 위치를 결정하기보다는 위젯을 중첩해서 사용하기 위한 레이아웃

레이아웃 중에서 처리 속도가 가장 빠르기 때문에 1개의 이미지만 화면에 보여준다든지 하는 단순한 형태로 사용할 경우에 성능이 가장 좋다.

주로 다른 레이아웃이나 위젯을 겹쳐 놓는 용도이므로 레이아웃의 필수 속성이 없고 정렬도 삽입되는 위젯의 layout_gravity 속성을 사용한다.



## 02 화면에 그려지는 디자인 요소 위젯

### 위젯의 대표 메뉴

- Text
- Buttons
- Widgets

### 텍스트뷰

화면에 나타낼 text 속성에 직접 입력하는 것은 권장하지 않는다. strings.xml에 사용할 텍스트를 미리 정의해두고 가져다가 사용한다.

색상도 마찬가지로 colors.xml에 작성된 값을 참조하여 사용한다.

위젯은 dp 단위를 사용하지만 텍스트뷰는 주로 sp 단위를 사용한다. 특히, `dimens.xml` (직접 생성해야함) 파일을 통해 참조해서 사용할 수 있다.

입력 가능한 줄 수 설정: maxLines, minLines

한 줄로 보이기: singleLine

말줄임 표시하기: ellipsize

비율로 글꼴 크기를 지정: ems 

텍스트뷰 높이 고정하기: lines

텍스트 전체 길이 제한하기: maxLength

### 에디트텍스트

주로 입력받는 용도로 사용된다.

에디트텍스트에 입력되는 글자를 실시간으로 처리할 수 있다. 실시간으로 아이디의 유효성 검사하거나, 패스워드를 검사할 때 사용하는 코드 형태이다. `addTextChangedListener`를 사용한다.

place holder 역할의 속성은: hint

입력할 때 사용할 키보드 모양을 설정: inputType

입력이 완료된 상황에서 다음 이벤트로 어떤 처리를 할 것인지 설정하기: imeOptions

### 이미지버튼

버튼과 이미지 버튼은 버튼에 삽입되는 콘텐츠 종류에 따라 결정된다.
- 버튼: 백그라운드 이미지 위에 텍스트만 추가 가능, 텍스트뷰의 속성을 거의 그대로 사용
- 이미지버튼: 백그라운드 이미지 위에 아이콘과 같은 이미지 추가 가능, 이미지뷰의 속성을 거의 그대로 사용

기본 이미지 사용하는 방법, 새로운 이미지를 불러와 사용하는 방법, 투명 배경 설정하기, 이미지 크기 설정하기(scaleType 속성), 이미지 영역에 색 채우기(tint 속성), 투명도 조절하기(alpha 속성) 을 배웠다.

### 라디오그룹과 라디오버튼

실습 형태로 제공됨.

### 체크박스

실습 형태로 제공됨.

### 토글버튼, 스위치, 이미지뷰

체크박스, 토글버튼, 스위치 모두 CompoundButton을 상속받아 사용하므로 하나의 사용법만 익히면 동일한 리스너로 컨트롤할 수 있다.

이미지뷰는 이미지버튼과 사용법이 유사하고, 리스너를 달아서 click 이벤트도 받을 수 있지만 이미지를 보여주는 용도로만 사용하는 것이 좋다.

### 프로그레스바

진행 상태를 나타내는 위젯이다.
 
두 가지가 있는데 시간이 일정하지 않는 작업을 할 때 현재 진행 중임을 나타내는 것과 얼마 정도 진행되었는지 진척도를 %로 보여주는 것이다.

참고, 화면을 그리는 것을 모두 메인 스레드에서 실행되어야 한다. UI Thread라고도 부른다.
### 시크바

볼륨을 조절하거나 뮤직 플레이어에서 재생 시간을 조절하는 용도로 많이 사용한다.

### 레이팅바

별점을 매길 때 사용하는 위젯이다. 

## 03 리소스 다루기

### drawable과 단위

**DPI** = 가로세로 1인치(2.54cm)의 정사각형 공간에 들어있는 픽셀의 숫자를 나타내는 단위

안드로이드는 기본으로 160DPI를 사용하고 == mdpi == 1인치의 사각형 안에 160개의 화소가 그려짐

**dp** = 안드로이드에서 사용하는 독립적 수치 단위

해상도와 관계없이 동일한 크기로 화면에 표시하기 위해 사용

**sp** = 문자열 크기 단위

줌인이나 줌 아웃 시에도 다른 위젯에게 영향을 주지 않고 해당 위젯의 글자만 커지거나 작아지게 할 수 있음.

**drawable 디렉토리 구성**

실무서 디자이너와 협업하면 각 사이즈에 맞는 이미지를 전달받는다.

해상도에 맞는 drawable 디렉터리에 이미지를 넣고 사용해야 한다.

### mipmap 앱 아이콘 사용하기

앱 아이콘 관리용으로 사용되는 mipmap 디렉터리를 안드로이드는 제공한다.

### strings와 다국어 처리

strings.xml 파일의 우측 상단에 open editor를 통해 열리는 Translations Editor에서 string 태그들을 관리할 수 있다.

Translations Editor에서 지구본 아이콘을 클릭하여 언어를 추가하고 다극어를 처리할 수도 있지만 실제 앱 개발 시 DB나 엑셀 형태의 sheet를 사용하여 한번에 입력한 후 strings.xml을 생성해서 사용한다.
